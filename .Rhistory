model.t<-lm(data.temp$Value~data.temp$TIME)
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
j<-1
#within that counter we created an if statement to extract only
#the data from one country at a time
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i,]<-model.t$coef
}}}
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
j<-1
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i,]<-model.t$coefficients[1],unique.country[j]
j<-1
#within that counter we created an if statement to extract only
#the data from one country at a time
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i,]<-model.t$coefficients[1],unique.country[j]
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i,]<-model.t$coefficients[1]
t[i,]<-model.t$coefficients[1]}
head(t)
str(t)
i<-1
j<-1
#within that counter we created an if statement to extract only
#the data from one country at a time
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i,]<-model.t$coefficients[1]}
head(t)
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i,]<-c(model.t$coefficients[1],unique.country[j]}
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i,]<-c(model.t$coefficients[1],unique.country[j])}
head(t)
head(unique.country)
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i,]<-c(model.t$coefficients[1],unique.country[1])}
head(t)
j<-2
t[i,]<-c(model.t$coefficients[1],unique.country[j])}
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i,]<-c(model.t$coefficients[1],unique.country[j])}
head(t)
i<-2
j<-2
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i,]<-c(model.t$coefficients[1],unique.country[j])}
head(t)
i<-2
j<-2
#within that counter we created an if statement to extract only
#the data from one country at a time
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i,]<-c(model.t$coefficients[1],unique.country[j])}
head(t)
c(model.t$coefficients[1],unique.country[j])
i<-2
j<-2
#within that counter we created an if statement to extract only
#the data from one country at a time
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i,]<-c(model.t$coefficients[1],unique.country[j])}
head(t)
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i,]<-c(model.t$coefficients[1],unique.country[j])}
i<-3
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i,]<-c(model.t$coefficients[1],unique.country[j])}
head(t)
i<-73
j<-2
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i,]<-c(model.t$coefficients[1],unique.country[j])}
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i,]<-c(model.t$coefficients[1],unique.country[j])}
for(j in 1:length(unique.country)){
i<-73
#within that counter we created an if statement to extract only
#the data from one country at a time
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i,]<-c(model.t$coefficients[1],unique.country[j])}
#then we used a second counter to utilize our unique country list
for(j in 1:length(unique.country)){
i<-73
#within that counter we created an if statement to extract only
#the data from one country at a time
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i,]<-c(model.t$coefficients[1],unique.country[j])}
}
head(t)
#then we used a second counter to utilize our unique country list
for(j in 1:length(unique.country)){
i<-73
#within that counter we created an if statement to extract only
#the data from one country at a time
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i,]<-c(model.t$coefficients[1],unique.country[j])}
}
#we used a nested loop structure to accomplish our loop.
#first we started a counter to do something in every row of our dataset
for(i in 1:length(m$LOCATION)){
#then we used a second counter to utilize our unique country list
for(j in 1:length(unique.country)){
i<-73
#within that counter we created an if statement to extract only
#the data from one country at a time
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i,]<-c(model.t$coefficients[1],unique.country[j])}
}
}}}
head(t)
for(j in 1:length(unique.country)){
i<-73
#within that counter we created an if statement to extract only
#the data from one country at a time
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i,]<-c(model.t$coefficients[1],unique.country[j])}
}
i
i<-56
for(j in 1:length(unique.country)){
i<-56
#within that counter we created an if statement to extract only
#the data from one country at a time
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i,]<-c(model.t$coefficients[1],unique.country[j])}
}
data.temp
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$TIME[i]~data.temp$Value[i])
t[i,]<-c(model.t$coefficients[1],unique.country[j])}
for(j in 1:length(unique.country)){
i<-56
#within that counter we created an if statement to extract only
#the data from one country at a time
if(m$LOCATION[i] == unique.country[j]){
#we stored the subset of one country at a time in a temporary object
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$TIME[i]~data.temp$Value[i])
t[i,]<-c(model.t$coefficients[1],unique.country[j])}
}
table(c(t[,1],unique.country))
unique.country
countrylist<-as.list(unique.country)
table(c(t[,1],countrylist))
temp.t<-table(c(t[,1],countrylist))
data.temp
model.t
list
rm(list)
list
t <- list(NA, nrow = 45, ncol = 2)
colnames(t) <- c("Intercept", "Country")
str(t)
t <- list(NA, nrow = 45, ncol = 2)
View(t)
str(t)
table(t)
colnames(t) <- c("Intercept")
t <- matrix(NA, nrow = 45)
colnames(t) <- c("Intercept")
str(t)
table.temp<-table(t,unique.country)
unique.country
length(t)
length(unique.country)
t <- matrix(NA, nrow = 44)
colnames(t) <- c("Intercept")
table.temp<-table(t,unique.country)
print(table.temp)
table.temp[i]<-table(t[i],unique.country[i])
print(table.temp)
table(t,unique.country
table.temp
table.temp
table.temp<-table(t,unique.country)
print(table.temp)
i<-1
j<-1
if(m$LOCATION[i] == unique.country[j]){
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$TIME[i]~data.temp$Value[i])
t[i]<- model.t$coefficients[1]
}
t
i<-1
j<-1
if(m$LOCATION[i] == unique.country[j]){
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i]<- model.t$coefficients[1]
}
t
model.t
lm(data.temp$Value[i]~data.temp$TIME[i])
for(i in 1:length(m$LOCATION)){
for(j in 1:length(unique.country)){
if(m$LOCATION[i] == unique.country[j]){
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i]<- model.t$coefficients[1]
}
}}
i
jt
j
t
j
unique.country
if(m$LOCATION[i] == unique.country[j]){
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i]<- model.t$coefficients[1]
}
i<-1
j<-1
if(m$LOCATION[i] == unique.country[j]){
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i]<- model.t$coefficients[1]
}
t
data.temp
j<-4
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
data.temp
data.temp
model.t
lm(data.temp$Value[i]~data.temp$TIME[i])
#attempt at regression
for(i in 1:length(data.temp$)){
for(j in 1:length(unique.country)){
if(m$LOCATION[i] == unique.country[j]){
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i]<- model.t$coefficients[1]
}
}}
#attempt at regression
for(i in 1:length(data.temp$Value)){
for(j in 1:length(unique.country)){
if(m$LOCATION[i] == unique.country[j]){
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i]<- model.t$coefficients[1]
}
}}
t
#attempt at regression
for(i in 1:length(t)){
for(j in 1:length(unique.country)){
if(m$LOCATION[i] == unique.country[j]){
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i]<- model.t$coefficients[1]
}
}}
t
for(i in 1:length(t)){
for(j in 1:length(unique.country)){
if(m$LOCATION[i] == unique.country[j]){
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i]<- model.t$coefficients[1]
}
for(i in 1:length(t)){
for(j in 1:length(unique.country)){
if(m$LOCATION[i] == unique.country[j]){
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i]<- model.t$coefficients[1]
}
}}
for(j in 1:length(unique.country)){
if(m$LOCATION[i] == unique.country[j]){
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i]<- model.t$coefficients[1]
}
}}
i<-1
j<-4
t
for(j in 1:length(unique.country)){
if(m$LOCATION[i] == unique.country[j]){
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i]<- model.t$coefficients[1]
}
}}
for(i in 1:length(t)){
for(j in 1:length(unique.country)){
if(m$LOCATION[i] == unique.country[j]){
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value[i]~data.temp$TIME[i])
t[i]<- model.t$coefficients[1]
}
}}
model.t
?lm.fit
lm(data.temp$Value[i]~data.temp$TIME[i])
lm(data.temp$Value~data.temp$TIME)
for(i in 1:length(t)){
for(j in 1:length(unique.country)){
if(m$LOCATION[i] == unique.country[j]){
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i]<- model.t$coefficients[1]
}
for(j in 1:length(unique.country)){
if(m$LOCATION[i] == unique.country[j]){
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i]<- model.t$coefficients[1]
}
}}
i<-1
j<-1
#attempt at regression for each country
for(i in 1:length(unique.country)){
i<-1
#creating smaller datasets organized by countries
for(j in 1:length(unique.country)){
j<-1
if(m$LOCATION[i] == unique.country[j]){
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i]<- model.t$coefficients[1]
}#closing if function
}#closing inner loop
}#closing outer loop
m$LOCATION[i] == unique.country[j
m$LOCATION[i] == unique.country[j]
m$LOCATION[i] == unique.country[j]
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
data.temp
model.t<-lm(data.temp$Value~data.temp$TIME)
model.t
t[i]<- model.t$coefficients[1]
t
t <- matrix(NA, nrow = length(unique.country))
str(t)
t[i]<- model.t$coefficients[1]
t
i
i<-1
j<-1
i<-1
t
t <- matrix(NA, nrow = length(unique.country))
if(m$LOCATION[i] == unique.country[j]){
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i]<- model.t$coefficients[1]
}#closing if function
t
for(i in 1:length(unique.country)){
#creating smaller datasets organized by countries
for(j in 1:length(unique.country)){
if(m$LOCATION[i] == unique.country[j]){
data.temp<-subset(m,subset = LOCATION ==unique.country[j])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i]<- model.t$coefficients[1]
}#closing if function
}#closing inner loop
}#closing outer loop
t
unique.country
for(i in 1:length(m$LOCATION)){
#creating smaller datasets organized by countries
if(m$LOCATION[i] == unique.country){
data.temp<-subset(m,subset = LOCATION ==unique.country[i])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i]<- model.t$coefficients[1]
}#closing if function
}#closing inner loop
for(i in 1:length(m$unique.country)){
#creating smaller datasets organized by countries
if(m$LOCATION[i] == unique.country){
data.temp<-subset(m,subset = LOCATION ==unique.country[i])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i]<- model.t$coefficients[1]
}#closing if function
}#closing inner loop
unique.country
for(i in 1:length(unique.country)){
#creating smaller datasets organized by countries
data.temp<-subset(m,subset = LOCATION ==unique.country[i])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i]<- model.t$coefficients[1]
}#closing if function
}#closing inner loop
for(i in 1:length(unique.country)){
#creating smaller datasets organized by countries
data.temp<-subset(m,subset = LOCATION ==unique.country[i])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i]<- model.t$coefficients[1]
}#closing if function
for(i in 1:length(unique.country)){
#creating smaller datasets organized by countries
data.temp<-subset(m,subset = LOCATION ==unique.country[i])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i]<- model.t$coefficients[1]
}#closing loop
t
temp.t<-table(c(t,countrylist))
d.all <- rbind.data.frame(countires = unique.country, corr.coef = t)
head(d.all)
unique.country
d.all <- cbind.data.frame(countires = unique.country, corr.coef = t)
head(d.all)
d.all <- cbind.data.frame(countries = unique.country, corr.coef = t)
head(d.all)
#Main script-------------
#Reading in raw data-----
m<-read.csv(file=paste(path.rd,"/","Measles_ALL.csv",sep=""))
View(m)
#Cleaning data-----------
m<-select(m, -c("SUBJECT", "INDICATOR", "MEASURE", "Flag.Codes",
"FREQUENCY"))
d.all <- cbind.data.frame(countries = unique.country, corr.coef = t)
write.csv(d.all,paste(path.clean,"Corr.Coef by Country",sep="/"))
write.csv(d.all,paste(path.clean,"Corr.Coef by Country.csv",sep="/"))
for(i in 1:length(unique.country)){
#creating smaller datasets organized by countries
data.temp<-subset(m,subset = LOCATION ==unique.country[i])
model.t<-lm(data.temp$Value~data.temp$TIME)
t[i]<- model.t$coefficients[1]
}#closing loop
t
d.all <- cbind.data.frame(countries = unique.country, corr.coef = t)
d.all
# new plan!
# subset data by year and send to clean folder
# run model off of cleaned sorted
sort(dataset$year)
plot(dataset$Value.x, dataset$Value.y, group=dataset$TIME)
d.all <- cbind.data.frame(countries = unique.country, corr.coef = t)
# in order to store the coefficients of each of the 44 linear regressions
# create a dataframe in which the loop can store the output
d.all <- cbind.data.frame(countries = unique.country, corr.coef = t)
